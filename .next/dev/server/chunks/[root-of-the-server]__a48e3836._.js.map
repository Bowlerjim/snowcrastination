{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/jim/snowcrastination/app/api/leaderboard/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\n// Temporary in-memory leaderboard for development\nlet leaderboardData: Array<{ name: string; score: number; timestamp: number }> = [\n  { name: 'Player1', score: 1500, timestamp: Date.now() },\n  { name: 'Player2', score: 1200, timestamp: Date.now() },\n  { name: 'Player3', score: 950, timestamp: Date.now() },\n]\n\nexport async function GET() {\n  try {\n    // Sort by score descending and take top 10\n    const topScores = leaderboardData\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 10)\n      .map(({ name, score }) => ({ name, score }))\n\n    return NextResponse.json({\n      success: true,\n      scores: topScores,\n    })\n  } catch (error) {\n    console.error('Failed to fetch leaderboard:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch leaderboard' },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { playerName, score } = await request.json()\n\n    // Validate input\n    if (!playerName || typeof playerName !== 'string') {\n      return NextResponse.json(\n        { success: false, error: 'Invalid player name' },\n        { status: 400 }\n      )\n    }\n\n    if (typeof score !== 'number' || score < 0) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid score' },\n        { status: 400 }\n      )\n    }\n\n    const cleanName = playerName.substring(0, 10).trim()\n    if (!cleanName) {\n      return NextResponse.json(\n        { success: false, error: 'Player name cannot be empty' },\n        { status: 400 }\n      )\n    }\n\n    // Check if score qualifies for leaderboard\n    const sortedScores = leaderboardData.sort((a, b) => b.score - a.score)\n    const lowestScore = sortedScores[Math.min(9, sortedScores.length - 1)]?.score || 0\n\n    if (leaderboardData.length < 10 || score > lowestScore) {\n      // Add to leaderboard\n      leaderboardData.push({\n        name: cleanName,\n        score,\n        timestamp: Date.now(),\n      })\n\n      // Keep only top 10\n      leaderboardData = leaderboardData\n        .sort((a, b) => b.score - a.score)\n        .slice(0, 10)\n\n      return NextResponse.json({\n        success: true,\n        message: 'Score added to leaderboard',\n        position: leaderboardData.findIndex((s) => s.score === score && s.name === cleanName) + 1,\n      })\n    } else {\n      return NextResponse.json({\n        success: false,\n        message: 'Score did not qualify for leaderboard',\n      })\n    }\n  } catch (error) {\n    console.error('Failed to submit score:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to submit score' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,kDAAkD;AAClD,IAAI,kBAA6E;IAC/E;QAAE,MAAM;QAAW,OAAO;QAAM,WAAW,KAAK,GAAG;IAAG;IACtD;QAAE,MAAM;QAAW,OAAO;QAAM,WAAW,KAAK,GAAG;IAAG;IACtD;QAAE,MAAM;QAAW,OAAO;QAAK,WAAW,KAAK,GAAG;IAAG;CACtD;AAEM,eAAe;IACpB,IAAI;QACF,2CAA2C;QAC3C,MAAM,YAAY,gBACf,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK,EAChC,KAAK,CAAC,GAAG,IACT,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,GAAK,CAAC;gBAAE;gBAAM;YAAM,CAAC;QAE5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,QAAQ;QACV;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAA8B,GACvD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEhD,iBAAiB;QACjB,IAAI,CAAC,cAAc,OAAO,eAAe,UAAU;YACjD,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAsB,GAC/C;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,OAAO,UAAU,YAAY,QAAQ,GAAG;YAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAgB,GACzC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,YAAY,WAAW,SAAS,CAAC,GAAG,IAAI,IAAI;QAClD,IAAI,CAAC,WAAW;YACd,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAA8B,GACvD;gBAAE,QAAQ;YAAI;QAElB;QAEA,2CAA2C;QAC3C,MAAM,eAAe,gBAAgB,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK;QACrE,MAAM,cAAc,YAAY,CAAC,KAAK,GAAG,CAAC,GAAG,aAAa,MAAM,GAAG,GAAG,EAAE,SAAS;QAEjF,IAAI,gBAAgB,MAAM,GAAG,MAAM,QAAQ,aAAa;YACtD,qBAAqB;YACrB,gBAAgB,IAAI,CAAC;gBACnB,MAAM;gBACN;gBACA,WAAW,KAAK,GAAG;YACrB;YAEA,mBAAmB;YACnB,kBAAkB,gBACf,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK,EAChC,KAAK,CAAC,GAAG;YAEZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;gBACT,UAAU,gBAAgB,SAAS,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,SAAS,EAAE,IAAI,KAAK,aAAa;YAC1F;QACF,OAAO;YACL,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAAyB,GAClD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}